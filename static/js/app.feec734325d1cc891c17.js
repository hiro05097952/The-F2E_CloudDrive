webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),s=i("hnaQ"),r={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};var o=i("VU/8")({name:"App"},r,!1,function(e){i("ZCAf")},null,null).exports,l=i("/ocq"),a=i("Gu7T"),c=i.n(a),u=window.firebase.storage(),v=window.firebase.firestore(),p={name:"index",data:function(){return{drive:[],selected:[],isChangeMenu:[],isDrop:!1,notice:[],updateInfo:{isOpen:!1,minute:3,progress:[]},task:"",folder:{isOpen:!1,newFolder:""},sort:{sortBy:"createTimeUp",onlyImportant:!1,display:"block"}}},firestore:{drive:v.collection("BUCKET")},filters:{timeFilter:function(e){var t=new Date(e);return t.getFullYear()+" 年 "+(t.getMonth()+1)+" 月 "+t.getDate()+" 號"},sizeFilter:function(e){return String(e).length<=6?(e/1024).toFixed(1)+" KB":String(e).length<=9?(e/1024/1024).toFixed(1)+" MB":String(e).length>9&&(e/1024/1024).toFixed(1)+" GB"}},methods:{selectItem:function(e){this.selected.includes(e)?this.selected=[]:this.selected=[e]},selectItembyCtrl:function(e){this.selected.includes(e)?this.selected.splice(this.selected.indexOf(e),1):this.selected.push(e)},openMenu:function(e){this.isChangeMenu[0]!==e?this.isChangeMenu=[e]:this.isChangeMenu=[]},openDrag:function(){var e=this;this.isDrop=!0,setTimeout(function(){e.isDrop=!1},1e3)},upload:function(e){var t=this,i="drop"===e.type?e.dataTransfer.files[0]:e.target.files[0];if(""!==i.type){var n=this,s={name:String(i.name.split(".",1)),type:n.convertorFileType(i.name.split(".").pop()),createTime:Number(new Date),lastEditedTime:i.lastModified,isImportant:!1,color:"primary",size:i.size,path:i.name,id:n.drive.length+1},r=0;this.updateInfo.isOpen=!0,this.task=u.ref(i.name).put(i),this.task.on("state_changed",function(e){0===e.bytesTransferred&&(r=t.updateInfo.progress.length,n.updateInfo.progress.push({name:s.name,success:0})),n.updateInfo.progress[r].success=e.bytesTransferred/e.totalBytes},function(){var e=s.name+"上傳失敗";return n.notice.push(e),setTimeout(function(){n.notice.splice(n.notice.indexOf(e),1)},3e3),!1},function(){n.updateInfo.progress.splice(r,1),0===n.updateInfo.progress.length&&(n.updateInfo.isOpen=!1)}),this.task.then(function(e){e.ref.getDownloadURL().then(function(e){s.url=e;var i=0===t.drive.length?t.convertorCol(t.drive.length+1):t.convertorCol(Number(t.drive[t.drive.length-1].id.substr(4,7))+1);v.collection("BUCKET").doc(i).set(s).then(function(){var e="已將"+s.name+"移動至我的雲端";n.notice.push(e),setTimeout(function(){n.notice.splice(n.notice.indexOf(e),1)},3e3)})})}),this.isDrop=!1}},canceltask:function(e){this.task.cancel(),this.updateInfo.progress.splice(e,1),this.updateInfo.isOpen=!1},addFolder:function(){var e=this,t={name:this.folder.newFolder,type:"file",createTime:Number(new Date),lastEditedTime:Number(new Date),isImportant:!1,color:"primary",size:0,id:this.drive.length+1},i=0===this.drive.length?this.convertorCol(this.drive.length+1):this.convertorCol(Number(this.drive[this.drive.length-1].id.substr(4,7))+1);v.collection("BUCKET").doc(i).set(t).then(function(){e.notice.push("已新增一個資料夾！"),setTimeout(function(){e.notice.splice(e.notice.indexOf("已新增一個資料夾！"),1)},3e3)}),this.closeFolder()},closeFolder:function(){this.folder.isOpen=!1,this.folder.newFolder=""},convertorCol:function(e){return e<10?"file00"+String(e):e<100?"file0"+String(e):"file"+e},convertorFileType:function(e){var t=e.toUpperCase();return"JPG"===t||"JPEG"===t||"PNG"===t||"SVG"===t||"GIF"===t||"BMP"===t?"img":"MP4"===t?"video":"ZIP"===t||"RAR"===t?"zip":e},removeFile:function(e,t,i){var n=this;"file"!==e&&u.ref(i).delete(),v.collection("BUCKET").doc(t).delete().then(function(){n.selected.splice(0,1),0===n.selected.length&&n.openMenu()})},removeFiles:function(){for(var e="",t=0;t<this.selected.length;t+=1)"file"!==(e=this.drive[this.selected[t]]).type?this.removeFile(e.type,e.id,e.path):this.removeFile(e.type,e.id)},favFile:function(e){v.collection("BUCKET").doc(this.drive[e].id).update({isImportant:!this.drive[e].isImportant}),this.openMenu()},selectAll:function(){for(var e=0;e<this.drive.length;e+=1)this.selected.push(e)},alert:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){alert("此功能尚未完成哦！")}),downloadItem:function(e){window.open(e,"download")}},computed:{sortFile:function(){var e=this.sort.onlyImportant?this.drive.filter(function(e){return!0===e.isImportant}):[].concat(c()(this.drive));switch(this.sort.sortBy){case"createTimeUp":return e.sort(function(e,t){return e.createTime-t.createTime});case"createTimeDown":return e.sort(function(e,t){return t.createTime-e.createTime});case"sizeUp":return e.sort(function(e,t){return e.size-t.size});case"sizeDown":return e.sort(function(e,t){return t.size-e.size});case"name":return e.sort(function(e,t){return e.name-t.name});case"type":return e.sort(function(e,t){return e.type-t.type})}return!1}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"},on:{click:function(t){e.isChangeMenu=[]}}},[i("div",{staticClass:"sidebar"},[i("i",{attrs:{id:"logo"}}),e._v(" "),i("label",{attrs:{id:"addfile"}},[i("input",{attrs:{type:"file"},on:{change:e.upload}})]),e._v(" "),i("ul",{staticClass:"nav"},[i("li",[i("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.sort.onlyImportant=!1}}},[e._v("我的雲端")])]),e._v(" "),i("li",[i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.alert(t)}}},[e._v("共用項目")])]),e._v(" "),i("li",[i("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.sort.onlyImportant=!0}}},[e._v("星號文件")])]),e._v(" "),i("li",[i("a",{attrs:{href:"#"},on:{clik:function(e){e.preventDefault()}}},[e._v("色彩文件")]),e._v(" "),i("div",[i("i",{staticClass:"red",on:{click:e.alert}}),e._v(" "),i("i",{staticClass:"green",on:{click:e.alert}}),e._v(" "),i("i",{staticClass:"purple",on:{click:e.alert}}),e._v(" "),i("i",{staticClass:"yellow",on:{click:e.alert}}),e._v(" "),i("i",{staticClass:"blue",on:{click:e.alert}}),e._v(" "),i("i",{staticClass:"brown",on:{click:e.alert}})])]),e._v(" "),i("li",[i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.alert(t)}}},[e._v("設定")])])]),e._v(" "),i("ul",{staticClass:"driveInfo"},[i("li",[e._v("雲端空間(5GB)：")]),e._v(" "),e._m(0),e._v(" "),i("li",[e._v("已使用0.01GB")]),e._v(" "),i("li",[i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.alert(t)}}},[e._v("升級空間容量！")])])])]),e._v(" "),i("div",{staticClass:"top"},[i("h1",[e._v("我的雲端")]),e._v(" "),i("i",{staticClass:"itemDisplay",class:{block:"block"===e.sort.display,list:"list"===e.sort.display},on:{click:function(t){e.sort.display="block"===e.sort.display?"list":"block"}}}),e._v(" "),i("input",{attrs:{type:"text",placeholder:"此功能尚未完成"}}),e._v(" "),i("i",{attrs:{id:"a"}})]),e._v(" "),i("div",{staticClass:"content",on:{dragenter:function(t){return t.preventDefault(),t.stopPropagation(),e.openDrag(t)}}},[i("ul",{staticClass:"toolbar"},[i("li",[e._v("\n        排序方式\n          "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.sort.sortBy,expression:"sort.sortBy"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.sort,"sortBy",t.target.multiple?i:i[0])}}},[e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),i("option",{attrs:{value:"name"}},[e._v("依名稱")]),e._v(" "),i("option",{attrs:{value:"type"}},[e._v("依類型")])])]),e._v(" "),0===e.selected.length?i("li",{on:{click:e.selectAll}},[e._v("全部選取")]):i("li",{on:{click:function(t){e.selected=[]}}},[e._v("已選取 ("+e._s(e.selected.length)+")")]),e._v(" "),i("li",{on:{click:function(t){e.folder.isOpen=!0}}},[e._v("新增資料夾")]),e._v(" "),i("li",[i("i",{attrs:{id:"shareUser"},on:{click:function(t){return t.preventDefault(),e.alert(t)}}})]),e._v(" "),i("li",[i("i",{attrs:{id:"delete"},on:{click:e.removeFiles}})]),e._v(" "),i("li",[i("i",{attrs:{id:"info"},on:{click:function(t){return t.preventDefault(),e.alert(t)}}})])]),e._v(" "),"list"===e.sort.display?i("ul",{staticClass:"listHead"},[i("li",[e._v("檔名")]),e._v(" "),i("li",[e._v("日期\n        "),"createTimeUp"===e.sort.sortBy?i("i",[e._v(" ⬆")]):e._e(),e._v(" "),"createTimeDown"===e.sort.sortBy?i("i",[e._v(" ⬇")]):e._e()]),e._v(" "),i("li",[e._v("檔案大小\n        "),"sizeUp"===e.sort.sortBy?i("i",[e._v(" ⬆")]):e._e(),e._v(" "),"sizeDown"===e.sort.sortBy?i("i",[e._v(" ⬇")]):e._e()]),e._v(" "),i("li",[e._v("擁有者")])]):e._e(),e._v(" "),i("ul",{staticClass:"fileBox",class:{list:"list"===e.sort.display}},e._l(e.sortFile,function(t,n){return i("li",{key:n,class:[{selected:e.selected.includes(n),important:t.isImportant},t.type],on:{click:[function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.selectItem(n)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:t.ctrlKey||t.shiftKey||t.altKey?null:t.metaKey?"button"in t&&0!==t.button?null:e.selectItembyCtrl(n):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:t.shiftKey||t.altKey||t.metaKey?null:t.ctrlKey?"button"in t&&0!==t.button?null:e.selectItembyCtrl(n):null}]}},["img"===t.type?i("img",{staticClass:"imgSnap",attrs:{src:t.url}}):i("i",{staticClass:"fileIcon"}),e._v(" "),i("i",{staticClass:"favIcon"}),e._v(" "),i("h3",[e._v(e._s(t.name))]),e._v(" "),"list"===e.sort.display?i("div",{staticClass:"listInfo"},[i("h4",[e._v(e._s(e._f("timeFilter")(t.createTime)))]),e._v(" "),i("h4",[e._v(e._s(e._f("sizeFilter")(t.size)))]),e._v(" "),i("h4",[e._v("我")])]):e._e(),e._v(" "),i("i",{staticClass:"menuSwitch",on:{click:function(t){return t.stopPropagation(),e.openMenu(n)}}}),e._v(" "),e.isChangeMenu[0]===n?i("ul",{staticClass:"editMenu"},[i("li",[e._v("重新命名")]),e._v(" "),i("li",{on:{click:function(i){return i.stopPropagation(),e.downloadItem(t.url)}}},[e._v("下載")]),e._v(" "),i("li",[e._v("共享")]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.favFile(n)}}},[e._v("加星號")]),e._v(" "),i("li",[e._v("更改顏色")]),e._v(" "),i("li",[e._v("移動到...")]),e._v(" "),i("li",{on:{click:function(i){i.stopPropagation(),"file"!==t.type?e.removeFile(t.type,t.id,t.path):e.removeFile(t.type,t.id)}}},[e._v("刪除")])]):e._e()])}),0),e._v(" "),e.isDrop?i("div",{staticClass:"dropFile",on:{dragenter:function(e){e.preventDefault(),e.stopPropagation()},dragover:function(e){e.preventDefault(),e.stopPropagation()},drop:function(t){return t.preventDefault(),e.upload(t)}}},[i("i",{attrs:{id:"dropLogo"}})]):e._e(),e._v(" "),i("ul",{staticClass:"notice"},[i("transition-group",{attrs:{name:"notice-list"}},e._l(e.notice,function(t,n){return i("li",{key:t},[i("i",{staticClass:"noticeIcon"},[e._v("!")]),e._v(" "),i("h3",[e._v(e._s(t))]),e._v(" "),i("i",{staticClass:"closeNotice",on:{click:function(t){return e.notice.splice(n,1)}}},[e._v("X")])])}),0)],1),e._v(" "),e.updateInfo.isOpen?i("div",{staticClass:"updateStatus"},[i("ul",{staticClass:"statusTitle"},[e._m(5),e._v(" "),i("li",[i("h4",[e._v("約 "+e._s(e.updateInfo.minute)+" 分鐘")])]),e._v(" "),i("li",[i("i",{staticClass:"closeIcon",on:{click:function(t){e.updateInfo.isOpen=!1}}})])]),e._v(" "),i("ul",{staticClass:"statusList"},e._l(e.updateInfo.progress,function(t,n){return i("li",{key:n},[i("i",{staticClass:"fileIcon"}),e._v(" "),i("h4",[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"progress"},[i("i",{style:{width:90*t.success+"px"}})]),e._v(" "),i("i",{staticClass:"closeIcon",on:{click:function(t){return e.canceltask(n)}}})])}),0)]):e._e(),e._v(" "),e.folder.isOpen?i("div",{staticClass:"addFolder"},[i("div",{staticClass:"comfirm"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.folder.newFolder,expression:"folder.newFolder"}],attrs:{type:"text",placeholder:"命名新資料夾"},domProps:{value:e.folder.newFolder},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addFolder(t)},input:function(t){t.target.composing||e.$set(e.folder,"newFolder",t.target.value)}}}),e._v(" "),i("h4",{on:{click:e.closeFolder}},[e._v("取消")]),e._v(" "),i("h4",{on:{click:e.addFolder}},[e._v("確定"),i("i")])])]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"memory"},[t("i")])},function(){var e=this.$createElement,t=this._self._c||e;return t("option",{attrs:{value:"createTimeUp"}},[this._v("依日期"),t("i",[this._v(" ⬆")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("option",{attrs:{value:"createTimeDown"}},[this._v("依日期"),t("i",[this._v(" ⬇")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("option",{attrs:{value:"sizeUp"}},[this._v("依大小"),t("i",[this._v(" ⬆")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("option",{attrs:{value:"sizeDown"}},[this._v("依大小"),t("i",[this._v(" ⬇")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("h3",[this._v("上傳中...")])])}]};var f=i("VU/8")(p,d,!1,function(e){i("r/Ai")},"data-v-1e8efe88",null).exports;n.a.use(l.a);var _=new l.a({routes:[{path:"/",name:"index",component:f}]});n.a.config.productionTip=!1,n.a.use(s.a),new n.a({el:"#app",router:_,components:{App:o},template:"<App/>"})},ZCAf:function(e,t){},"r/Ai":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.feec734325d1cc891c17.js.map